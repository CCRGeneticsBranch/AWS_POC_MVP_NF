profiles {
    test {
        process {
            cpus = 2
            memory = '3 GB'

            withName: star {
               cpus = 8
               memory = '32 GB'
               time = '5h'
           }    

        }
    }
    biowulf {
        process {
            executor = 'slurm'
            queue = 'norm'
            queueSize = 100
            errorStrategy = 'finish'
            maxRetries = 0
            pollInterval = '1 min'
            queueStatInterval = '5 min'
            submitRateLimit = '6/1min'
//            scratch = '/lscratch/$SLURM_JOBID'
            clusterOptions = ' --gres=lscratch:400'

            withName: cutadapt {
               cpus = '4'
               memory = '2 GB'
               queue = 'quick'
               time = '2h'
           }

            withName: fastqc {
               cpus = '4'
               memory = '2 GB'
               queue = 'quick'
               time = '2h'
           }

            withName: star {
               cpus = '16'
               memory = '120 GB'
               queue = 'ccr,norm'
               time = '20h'
           }
            withName: rsem {
               cpus = '16'
               memory = '120 GB'
               queue = 'ccr,norm'
               time = '20h'
           }
            withName: multiqc {
               cpus = '4'
               memory = '50 GB'
               queue = 'ccr,norm'
               time = '4h'
           }	
        
        }
	singularity.enabled = true
        singularity.autoMounts = true
        singularity.cacheDir = "$PWD/singularity"
        singularity.envWhitelist='https_proxy,http_proxy,ftp_proxy,DISPLAY,SLURM_JOBID'

    }

}

docker.enabled = true
nextflow.enable.dsl=2
