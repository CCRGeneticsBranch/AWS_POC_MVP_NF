{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Overview","text":""},{"location":"#overview-of-the-workflow","title":"Overview of the workflow","text":"<p>This next-generation sequencing (NGS) pipeline is containerized, platform-independent, uses Nextflow DSL2 workflow, and currently operates on NIH's Biowulf HPC cluster and the AWS cloud. This Exome-RNAseq workflow performs extensive quality control, mutational calling, tumor mutational burden assessment, mutational signatures, HLA typing, copy number calling, T-cell infiltration prediction, neoantigen prediction, gene expression profiling, fusion detection, variant calling, and annotation. This comprehensive suite is crucial for deep genomic characterization, addressing both research samples and clinical patient data at NIH. The ClinOmics data portal extends these capabilities by offering a user-friendly web portal for data exploration.</p> <p>Here is a Snapshot of our RNAseq and Exome workflows.</p>"},{"location":"#rnaseq-workflow","title":"RNAseq Workflow","text":""},{"location":"#exome-workflow","title":"Exome Workflow","text":""},{"location":"#prerequisites","title":"Prerequisites","text":"<p>To run this workflow, you will need the following software: <pre><code>    Nextflow &gt;= 21.04.3\n    Singularity 3.10.5\n    Graphviz 2.40\n</code></pre></p>"},{"location":"#installation","title":"Installation","text":"<p>Please clone this repository to your local filesystem using the following command:</p> <pre><code>        git clone https://github.com/CCRGeneticsBranch/Oncogenomics_NF_WF.git\n        cd Oncogenomics_NF_WF \n</code></pre>"},{"location":"#setting-up-the-workflow-on-biowulf","title":"Setting up the workflow on biowulf","text":"<ol> <li>This workflow is hosted on biowulf in khanlab space /data/khanlab/projects/Nextflow_dev/dev/AWS_POC_Nextflow.</li> <li>All the pipeline config can be accessed using nextflow.config file.</li> <li>Within the nextflow.config file you can select the profile to launch the pipeline. To run pipeline on biowulf select profile <code>biowulf</code>. This is set up to work with biowulf batch resources.</li> <li>Guidelines to create an input samplesheet can be found here.</li> <li>All the references, annotation and bed files are currently located under /data/khanlab. We currently support data processing for these capture kits.</li> </ol>"},{"location":"#sequencing-capture-kits","title":"Sequencing capture kits","text":"RNAseq Exome Access clin_ex_v1 PolyA seqcapez.hu.ex.v3 PolyA_stranded Agilent_v7 Ribozero idt_v2_plus smartrna xgen_hyb_panelv2 <p>If you want to process the data sequenced by other kits, please reach out to Vineela Gangalapudi.</p>"},{"location":"pipeline_launch/","title":"Running the workflow.","text":"<p>To initiate the workflow, execute the <code>launch.sh</code> script on an interactive node. This script acts as a wrapper, spawning and submitting jobs to the SLURM scheduling system. It extracts the <code>PatientID</code> and <code>Casename</code> information from the samplesheet, creates the corresponding output directory for each case, and organizes all results and log files under <code>[output_directory]/PatientID/Casename/</code>.</p> <pre><code>Usage: ./launch.sh &lt;samplesheet_with_full_path&gt; [output_directory] [genome]\nThis script requires at least one positional argument:\n1. Full path to samplesheet csv file\nOptional arguments:\n2. Path to results directory (default: /data/khanlab/projects/processed_DATA)\n3. Genome name. Accepted values are hg19 and mm39 (default: hg19)\n</code></pre>"},{"location":"pipeline_launch/#workflow-log","title":"Workflow log","text":"<p>When the workflow is launched, it will produce a log that provides information about the pipeline execution, including the command line used, the version of Nextflow, the input folder path, the results directory, and the work directory.</p> <pre><code>[+] Loading singularity  4.0.3  on cn4280\n[+] Loading java 17.0.3.1  ...\n[+] Loading nextflow  23.10.0\n[+] Loading Graphviz v 2.46.1  ...\nNXF_HOME=/data/khanlab/projects/Nextflow_dev/dev/NCI0439/TestTNR/.nextflow\nnextflow run -c /vf/users/khanlab/projects/Nextflow_dev/dev/AWS_POC_MVP_NF/nextflow.config -profile biowulf_test_run_slurm --logdir /data/khanlab/projects/Nextflow_dev/dev/NCI0439/TestTNR/log /vf/users/khanlab/projects/Nextflow_dev/dev/AWS_POC_MVP_NF/main.nf -resume -with-trace -with-timeline -with-dag\nESC[33mNextflow 24.04.4 is available - Please consider updating your version to itESC(BESC[m\nN E X T F L O W  ~  version 23.10.0\nLaunching `/vf/users/khanlab/projects/Nextflow_dev/dev/AWS_POC_MVP_NF/main.nf` [shrivelled_stallman] DSL2 - revision: b8c8cd72d2\nE X O M E - R N A S E Q - N F   P I P E L I N E\n===================================\nNF version   : 23.10.0\nrunName      : shrivelled_stallman\nusername     : gangalapudiv2\nconfigs      : [/vf/users/khanlab/projects/Nextflow_dev/dev/AWS_POC_MVP_NF/nextflow.config, /vf/users/khanlab/projects/Nextflow_dev/dev/AWS_POC_MVP_NF/nextflow.config]\nprofile      : biowulf_test_run_slurm\ncmd line     : nextflow run -c /vf/users/khanlab/projects/Nextflow_dev/dev/AWS_POC_MVP_NF/nextflow.config -profile biowulf_test_run_slurm --logdir /data/khanlab/projects/Nextflow_dev/dev/NCI0439/TestTNR/log /vf/users/khanlab/projects/Nextflow_dev/dev/AWS_POC_MVP_NF/main.nf -resume -with-trace -with-timeline -with-dag\nstart time   : 2024-08-20T12:54:52.989621486-04:00\nprojectDir   : /vf/users/khanlab/projects/Nextflow_dev/dev/AWS_POC_MVP_NF\nlaunchDir    : /vf/users/khanlab/projects/Nextflow_dev/dev/NCI0439/TestTNR\nworkdDir     : /vf/users/khanlab/projects/Nextflow_dev/dev/NCI0439/TestTNR/work\nhomeDir      : /home/gangalapudiv2\n\n[-        ] process &gt; Tumor_Normal_RNAseq_WF:Comm... -\n[-        ] process &gt; Tumor_Normal_RNAseq_WF:Comm... -\n[-        ] process &gt; Tumor_Normal_RNAseq_WF:Comm... -\n[-        ] process &gt; Tumor_Normal_RNAseq_WF:Comm... -\n[-        ] process &gt; Tumor_Normal_RNAseq_WF:Comm... -\n</code></pre>"},{"location":"pipeline_launch/#workflow-resources","title":"Workflow Resources","text":"<p>$Script_home ---&gt; Path to the code repository (/data/khanlab/projects/Nextflow_dev/AWS_POC_Nextflow).</p> <p>$Script_home/nextflow.config ---&gt; All the pipeline config resources are called from this file. We are using <code>biowulf_test_run_slurm</code> profile to run the samples on biowulf.</p> <p>$Script_home/config ---&gt; Cluster config, singularity config, docker config and params config are located here.</p> <p>$Script_home/main.nf ---&gt; This script calls the workflows and subworkflows in the pipeline.</p>"},{"location":"pipeline_launch/#run-debugging","title":"Run Debugging","text":"<p>Run-related Files: All files associated with the run will be generated in the <code>[output_directory]/PatientID/Casename</code> directory.</p> <p>Log Files: The log file, ending in <code>*.out</code>, will be located in <code>[output_directory]/PatientID/Casename</code>. This file contains details on any errors encountered during the run and provides the path to the work directory for troubleshooting.</p> <p>Work Directory: Inside <code>[output_directory]/PatientID/Casename/work</code>, you will find subfolders containing <code>.command.sh</code>, <code>.command.log</code>, and <code>.command.err</code> files for each process. These files offer detailed information about the execution of each command and any issues that may have occurred.</p>"},{"location":"samplesheet/","title":"Setting up Samplesheet","text":"<p>There are two ways to generate a samplesheet for the pipeline depending on the use case. If the goal is to process patient fastq files through the pipeline to use the results for secondary analysis, you can follow these steps to build your own samplesheet. Along with processing the data, if you want to visualize the results on ClinOmics data portal then follow steps to build samplesheet from mastersheet. This is highly recommended.</p>"},{"location":"samplesheet/#build-your-own-samplesheet","title":"Build your own samplesheet","text":"<p>The pipeline requires a CSV file as input for each patient. The samplesheet must include the following mandatory columns:</p> Column name Notes Example sample Patient name NCI-Test1 library Name of the sample library Test1_T1D_E read1 Full path to the read1 /data/khanlab/DATA/Sample_Test1_T1D_E/Sample_Test1_T1D_E.R1.fastq.gz read2 Full path to the read2 /data/khanlab/DATA/Sample_Test1_T1D_E/Sample_Test1_T1D_E.R2.fastq.gz sample_captures Name of the capture kit used List of supported capture kits are here Matched_RNA Matched RNA library for the tumor library Test1_T1R_T Matched_normal Matched exome normal library for the tumor library Test1_N1D_E Diagnosis Diagnosis of the patient Glioma casename Casename for the patient NCI-Test1 type Data type example: tumor_RNA, tumor_DNA, normal_DNA, blood_DNA FCID Flowcell ID ACJ678349"},{"location":"samplesheet/#build-samplesheet-from-mastersheet","title":"Build samplesheet from mastersheet","text":""}]}